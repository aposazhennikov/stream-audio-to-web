# Аудио Стриминг Сервер

Это приложение создает веб-сервер для потоковой передачи аудиофайлов в браузер. Приложение читает список аудиофайлов из файла `playlist.txt` и последовательно транслирует их через порт 9999.

## Возможности

- Трансляция MP3 и WAV файлов через HTTP
- Автоматическое воспроизведение аудиопотока в браузере
- Автоматический переход к следующему треку после завершения воспроизведения
- Логирование ошибок в Sentry
- Контейнеризация с использованием Docker

## Архитектура проекта

Проект разделен на несколько модулей:

- `main.py` - Главный модуль приложения, инициализирует и запускает все компоненты
- `playlist_manager.py` - Отвечает за загрузку и управление плейлистом аудиофайлов
- `audio_streamer.py` - Обрабатывает аудиофайлы и создает потоковый контент
- `web_server.py` - Веб-сервер для доставки аудиопотока через HTTP
- `logger.py` - Настраивает логирование и интеграцию с Sentry

## Формат файла плейлиста

Файл `playlist.txt` должен содержать пути к аудиофайлам, по одному на строку. Пример:

```
/path/to/audio/file1.mp3
/path/to/audio/file2.wav
/path/to/audio/file3.mp3
```

## Запуск приложения

### Локально

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл плейлиста `playlist.txt` со списком аудиофайлов

3. Запустите приложение:
```bash
python main.py
```

4. Откройте в браузере `http://localhost:9999` для прослушивания потока

### С использованием Docker

1. Соберите Docker образ:
```bash
docker build -t audio-streamer .
```

2. Запустите контейнер, примонтировав директорию с аудиофайлами и файл плейлиста:
```bash
docker run -p 9999:9999 -v /path/to/your/audio:/app/audio -v /path/to/your/playlist.txt:/app/playlist.txt audio-streamer
```

3. Откройте в браузере `http://localhost:9999` для прослушивания потока

## Описание модулей

### main.py
Основной исполняемый файл приложения. Инициализирует логгер, менеджер плейлиста и запускает веб-сервер для трансляции аудио.

### logger.py
Настраивает систему логирования и интеграцию с Sentry для отслеживания ошибок.

### playlist_manager.py
Класс `PlaylistManager` загружает плейлист из файла, проверяет существование аудиофайлов и их формат, и предоставляет методы для навигации по плейлисту.

### audio_streamer.py
Класс `AudioStreamer` обрабатывает аудиофайлы и создает потоки данных для веб-трансляции. Использует библиотеку pydub для работы с аудио.

### web_server.py
Класс `AudioStreamServer` создает веб-сервер на Flask, который обеспечивает потоковую передачу аудио в браузер. Включает HTML-шаблон для веб-интерфейса с аудиоплеером.

## Требования

- Python 3.6 или выше
- ffmpeg (для работы с аудиофайлами)
- Зависимости из файла requirements.txt
